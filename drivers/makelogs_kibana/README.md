# Driver: makelogs_kibana
This driver simulates Kibana queries against data generated by the *rankin_makelogs* driver.

## Operations
The driver supports the following 3 operations:

### traffic
This operation retrieves data for a dashboard showing traffic information based on the configured parameters. This contains 6 visualisations and looks like this:

![
](./dashboard_images/traffic.png)

### errors
This operation retrieves data for a dashboard showing system errors based on the configured parameters. This contains 5 visualisations and a search panel and looks like this:

![
](./dashboard_images/errors.png)

### users
This operation retrieves data for a dashboard showing user centric information based on the configured parameters. This contains 5 visualisations and looks like this:

![
](./dashboard_images/users.png)

## Parameters
The following parameters can be used to configure the data generation process of the makelogs driver:

Parameter | Description
:------------ | :------------
**index** | Index or alias the Kibana queries should be directed at. Defaults to 'rankin*'.
**days** | Date or date interval the current date will be randomized from. This can be specified in 3 formats: 1) Absolute single date, e.g. *"2015-04-20"* 2) Absolute date range, e.g. *"2015-04-20,2015-04-26"* 3) Date range relative to current date/time, e.g. *"-7,3"*. Defaults to *"-1,0"*.
**period** | Length of the period in days that the Kiana queries will address. Defaults to 30.
**timeout** | Request timeout in milliseconds. Defaults to 30000 (30s). This can also be passed as a parameter to the individual operations.
**text_filter_file** | Path to file containing terms used to filter the 'text' field. If no file is provided, the default behaviour is that no filtering on the 'text' field will occur.

## Example Configuration File
Below is a sample configuration file that shows how the driver can be invoked. 

This example switches between all three dashboards according to the weights at a rate of 1 request per 5 seconds using a single worker.

```
{
  "jobs": [
    {
      "job_id": "KibanaExample",
      "concurrency": 1,
      "driver": "makelogs_kibana",
      "rate_limit": 0.2,
      "parameters": {
        "index": "rankin_all",
        "days": "2015-01-30,2015-01-31",
        "period": 21,
        "timeout": 60000
      },
      "operations": [
        {
          "name": "traffic",
          "weight": 6,
          "sla": 2000,
          "parameters:" {
            "timeout": 120000
          }
        },
        {
          "name": "errors",
          "weight": 1,
          "sla": 3000
        },
        {
          "name": "users",
          "weight": 3,
          "sla": 2000
        }
      ]
    }
  ]
}
```
