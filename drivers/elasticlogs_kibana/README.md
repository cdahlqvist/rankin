# Driver: elasticlogs_kibana
This driver simulates Kibana queries against data generated by the *elasticlogs* driver. Instead of resolving index patterns through the field stats API like Kibana does, it works on configured index patterns and aliases.

## Operations
The driver supports the following 2 operations:

### traffic
This operation simulates a dashboard consisting of 7 data driven visualizations (plus one markdown panel) showing general information about overall traffic. This dashboard looks like this:

![
](./dashboard_images/EL_Traffic.png)

### content_issues
This operation simulates a dashboard consisting of 5 data driven visualizations (plus one markdown panel) showing general information about requests that have resulted in a 404 (not_found) error and can indicate issues with internal or external links. This dashboard looks like this:

![
](./dashboard_images/EL_ContentIssues.png)

## Parameters
The following parameters can be used to configure the query behaviour of the *elasticlogs_kibana* driver:

Parameter | Description
:------------ | :------------
**index_list** | List of indices or aliases to query. A random entry from the list will be selected for each execution. Defaults to '["rankin*"]'.
**days** | Date or date interval the current date will be randomized from. This can be specified in 3 formats: 1) Absolute single date, e.g. *"2016-04-20"* 2) Absolute date range, e.g. *"2016-04-20,2016-04-26"* 3) Date range relative to current date/time, e.g. *"-7,3"*. Defaults to *"-1,0"*. The generated date will be used as the end date for the period queried.
**period** | Length of the period in days that the Kibana queries will address. Defaults to 30.
**date_histogram_interval** | The interval to use for date histograms. Defaults to "1d". This parameter can be overridden per operation.
**timeout** | Request timeout in milliseconds. Defaults to 30000 (30s). This can also be passed as a parameter to the individual operations.
**text_filter_file** | Path to file containing terms used to filter the 'text' field. If no file is provided, the default behaviour is that no filtering on the 'text' field will occur.
**use_text_filter** | Boolean indicating whether the a record from the supplied text_filter_file should be used as a filter if present. This parameter can be overridden per operation and defaults to *false*.
**elasticsearch_version** | String indicating which version of Elasticsearch that is being benchmarked. This parameter defaults to *5.0*.

## Example Configuration File
Below is a sample configuration file that shows how the driver can be invoked. 

This example switches between both dashboards according to the weights at a rate of 1 request per 5 seconds using a single worker. It will hit the 'rankin_current' index/alias pattern 2/3 of all requests.

```
{
  "jobs": [
    {
      "job_id": "KibanaExample",
      "concurrency": 1,
      "driver": "elasticlogs_kibana",
      "rate_limit": 0.2,
      "parameters": {
        "index_list": ["rankin_all", "rankin_current", "rankin_current"],
        "days": "2016-01-30,2016-01-31",
        "period": 21,
        "timeout": 60000,
        "text_filter_file":"./drivers/elasticlogs_kibana/configs/filters.txt",
        "use_text_filter":false
      },
      "operations": [
        {
          "name": "traffic",
          "weight": 3,
          "sla": 2000,
          "parameters": {
            "timeout": 120000,
            "use_text_filter":true
          }
        },
        {
          "name": "content_issues",
          "weight": 1,
          "sla": 1000
        }
      ]
    }
  ]
}
```
